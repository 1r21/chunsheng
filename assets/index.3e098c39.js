import{a as t,p as e,b as a,o as n,c as s,t as o,d as i,r,w as l,e as c,f as d,F as p,g as u,h as g,v as h,i as f,j as m,k as v,l as b,m as y}from"./vendor.f0034e12.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(a){const n=new URL(t,location),s=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((a,o)=>{const i=new URL(t,n);if(self[e].moduleMap[i])return a(self[e].moduleMap[i]);const r=new Blob([`import * as m from '${i}';`,`${e}.moduleMap['${i}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${t}`)),s(l)},onload(){a(self[e].moduleMap[i]),s(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/assets/");function w(t){const{env:e,biz:a}=window.dd;"notInDingTalk"!==e.platform?a.navigation.setTitle({title:t}):document.title=t}t.defaults.baseURL="http://api.chenggang.win/api",t.defaults.headers.post["Content-Type"]="application/json",t.interceptors.request.use((t=>t),(t=>Promise.reject(t))),t.interceptors.response.use((t=>{const{status:e,data:a}=t;if(200===e){const{code:t,message:e,data:n}=a;return 0===t?n:Promise.reject(e)}return Promise.reject("error")}));const x={name:"Loading",props:{icon:{default:"loading",type:String},size:{default:"default",type:String},loading:Boolean,error:String}},k=l("data-v-02aa36a4");e("data-v-02aa36a4");const T={key:0,class:"loading-wrap"},_={key:1,class:"error"};a();const $=k(((t,e,a,l,c,d)=>a.loading||a.error?(n(),s("div",T,[a.loading?(n(),s("i",{key:0,class:["iconfont","loading",`i-${a.icon}`,a.size]},null,2)):a.error?(n(),s("span",_,o(a.error),1)):i("",!0)])):r(t.$slots,"default",{key:1})));x.render=$,x.__scopeId="data-v-02aa36a4";const L=[10,102,1004,1016],E=Math.floor(Math.random()*L.length);var B={name:"Article",props:["news"],data:()=>({place:`./place/${L[E]}.jpg`}),mounted(){if("IntersectionObserver"in window){new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const e=t.target;setTimeout((()=>{/\place\/\d+\.jpg/.test(e.src)&&(e.src=this.news.cover)}),300)}}))})).observe(this.$refs.image)}}};const I=l("data-v-7a824a1c");e("data-v-7a824a1c");const V={class:"post-card"},C={class:"content"};a();const j=I(((t,e)=>(n(),s("article",V,[c("img",{src:t.place,alt:"news cover",class:"cover",ref:"image"},null,8,["src"]),c("div",C,[c("p",null,o(t.news.date),1),c("p",null,o(t.news.title),1)])]))));B.render=j,B.__scopeId="data-v-7a824a1c";var M={name:"Home",components:{Loading:x,Article:B},data:()=>({loading:!1,list:[]}),async mounted(){this.loading=!0;const{list:e}=await async function(){return t.get("/news")}();this.list=e,this.loading=!1,w("I Believe")}};const R=l("data-v-5af7f0d5");e("data-v-5af7f0d5");const S={class:"article-list"},P=c("div",{class:"footer"},"～over～",-1);a();const U=R(((t,e)=>{const a=d("Article"),o=d("router-link"),i=d("Loading");return n(),s(i,{loading:t.loading,size:"large"},{default:R((()=>[c("div",S,[(n(!0),s(p,null,u(t.list,(t=>(n(),s(o,{custom:"",key:t.id,to:`/detail/${t.id}`},{default:R((({navigate:e})=>[c(a,{news:t,onClick:e,role:"link"},null,8,["news","onClick"])])),_:2},1032,["to"])))),128))]),P])),_:1},8,["loading"])}));M.render=U,M.__scopeId="data-v-5af7f0d5";var A={name:"TranslateBox",components:{Loading:x},props:{position:{required:!0,type:Object},text:{required:!0,type:String},visible:{required:!0,type:Boolean},btnVisible:{required:!0,type:Boolean}},data:()=>({translation:{},loading:!1}),computed:{pos(){const{clientWidth:t,clientHeight:e}=document.documentElement,{x:a=0,y:n=0}=this.position,s=t-a,o=e-n,i=n>40?n-40:n,r=o+20;return s<=a&&o<=n?{bottom:`${r}px`,right:`${s}px`}:s<=a?{top:`${i}px`,right:`${s}px`}:o<=n?{bottom:`${r}px`,left:`${a}px`}:{top:`${i}px`,left:`${a}px`}}},methods:{async showTranslation(){this.$emit("hide"),this.$emit("show"),this.loading=!0,this.translation=null;const{list:e}=await async function(e){return t.post("/translate",{q:e})}(this.text);if(e&&e.length>0){const[t]=e;console.log(t),this.translation=t}this.loading=!1}}};const O=l("data-v-141b18c0");e("data-v-141b18c0");const q={key:0,class:"content"},z={key:0},D={class:"before"},F=c("span",null,"S: ",-1),H={class:"after"},N=c("span",{class:"dst"},"D: ",-1);a();const W=O(((t,e)=>{const a=d("Loading");return n(),s("div",{class:"translate",style:t.pos},[g(c("i",{class:"iconfont i-fanyi",onClick:e[1]||(e[1]=(...e)=>t.showTranslation&&t.showTranslation(...e))},null,512),[[h,t.btnVisible]]),c(a,{loading:t.loading,icon:"translater",size:"small"},{default:O((()=>[t.visible?(n(),s("div",q,[t.translation?(n(),s(p,{key:1},[c("p",D,[F,c("span",null,o(t.translation.src),1)]),c("p",H,[N,c("span",null,o(t.translation.dst),1)])],64)):(n(),s("div",z,"No result"))])):i("",!0)])),_:1},8,["loading"])],4)}));A.render=W,A.__scopeId="data-v-141b18c0";var G={name:"Detail",components:{Loading:x,TranslateBox:A},data:()=>({loading:!1,exceptionText:"",audioEl:{},paused:!0,article:{},translatePos:{},translateText:"",translateVisible:!1,translateBtnVisible:!1}),async mounted(){const{id:e}=this.$route.params;this.loading=!0;try{const a=await async function(e){return t.post("/news/detail",{id:e})}(String(e));if(a){const{date:t,title:e}=a;this.article=a,w(`(${t}) ${e}`)}}catch(a){const t="string"==typeof a?a:"error";this.exceptionText=t,w(t)}this.loading=!1,this.$nextTick((()=>{this.audioEl=this.$refs.audio}))},methods:{play(){this.audioEl&&(this.audioEl.play(),this.paused=!1)},pause(){this.audioEl&&(this.audioEl.pause(),this.paused=!0)},ended(){this.paused=!0},getContextmenu(t){const{x:e,y:a}=t;this.translatePos={x:e,y:a};const n=window.getSelection();if(n){const t=n.getRangeAt(0),e=String(t);e&&(this.translateText=e,this.translateBtnVisible=!0)}},hideTranslate(){this.translateVisible=!1,this.translateBtnVisible=!1}}};const J=l("data-v-4a01c296");e("data-v-4a01c296");const K={class:"footer"},Q=m(" from: ");a();const X=J(((t,e)=>{const a=d("router-link"),o=d("TranslateBox"),i=d("Loading");return n(),s(i,{loading:t.loading,error:t.exceptionText,size:"large"},{default:J((()=>[c("div",{class:"transcript",onContextmenu:e[1]||(e[1]=f(((...e)=>t.getContextmenu&&t.getContextmenu(...e)),["prevent"])),onClick:e[2]||(e[2]=(...e)=>t.hideTranslate&&t.hideTranslate(...e)),onTouchstart:e[3]||(e[3]=(...e)=>t.hideTranslate&&t.hideTranslate(...e))},[c("div",{innerHTML:t.article.transcript},null,8,["innerHTML"]),g(c("p",K,[Q,c("a",{href:t.article.src},"pbs",8,["href"])],512),[[h,t.article.transcript]])],32),c("audio",{src:t.article.src,onEnded:e[4]||(e[4]=(...e)=>t.ended&&t.ended(...e)),ref:"audio"},null,40,["src"]),c("div",{class:"action",style:{backgroundImage:`url(${t.article.cover})`}},[t.paused?(n(),s("i",{key:0,class:"iconfont i-play",onClick:e[5]||(e[5]=(...e)=>t.play&&t.play(...e))})):(n(),s("i",{key:1,class:"iconfont i-pause",onClick:e[6]||(e[6]=(...e)=>t.pause&&t.pause(...e))})),c(a,{to:"/",custom:""},{default:J((({navigate:t})=>[c("i",{class:"iconfont i-home",onClick:t},null,8,["onClick"])])),_:1})],4),c(o,{text:t.translateText,position:t.translatePos,visible:t.translateVisible,btnVisible:t.translateBtnVisible,onShow:e[7]||(e[7]=e=>t.translateVisible=!0),onHide:e[8]||(e[8]=e=>t.translateBtnVisible=!1)},null,8,["text","position","visible","btnVisible"])])),_:1},8,["loading","error"])}));G.render=X,G.__scopeId="data-v-4a01c296";var Y={name:"NotFound"};const Z=l("data-v-f2df4c1a");e("data-v-f2df4c1a");const tt={class:"content"};a();const et=Z(((t,e,a,o,i,r)=>(n(),s("div",tt,"404 Not Found"))));Y.render=et,Y.__scopeId="data-v-f2df4c1a";const{BASE_URL:at}={VITE_API:"http://api.chenggang.win/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},nt=[{path:"/",component:M},{path:"/detail/:id",component:G},{path:"/:pathMatch(.*)*",component:Y}];var st=v({history:b(at),routes:nt}),ot={name:"App"};const it=l("data-v-2cf36390");e("data-v-2cf36390");const rt={class:"container"};a();const lt=it(((t,e,a,o,i,r)=>{const l=d("router-view");return n(),s("div",rt,[c(l)])}));ot.render=lt,ot.__scopeId="data-v-2cf36390";const ct=y(ot);ct.use(st),ct.mount("#app");
