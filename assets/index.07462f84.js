import{a as t,p as e,b as a,o as n,c as s,t as o,d as i,r as l,w as r,e as c,f as d,F as p,g as u,h,v as g,i as f,j as m,k as v,l as b,m as y}from"./vendor.f0034e12.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(a){const n=new URL(t,location),s=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((a,o)=>{const i=new URL(t,n);if(self[e].moduleMap[i])return a(self[e].moduleMap[i]);const l=new Blob([`import * as m from '${i}';`,`${e}.moduleMap['${i}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${t}`)),s(r)},onload(){a(self[e].moduleMap[i]),s(r)}});document.head.appendChild(r)})),self[e].moduleMap={}}}("/chunsheng/assets/");function x(t){const{env:e,biz:a}=window.dd;"notInDingTalk"!==e.platform?a.navigation.setTitle({title:t}):document.title=t}t.defaults.baseURL="http://chenggang.win:9000/api",t.defaults.headers.post["Content-Type"]="application/json",t.interceptors.request.use((t=>t),(t=>Promise.reject(t))),t.interceptors.response.use((t=>{const{status:e,data:a}=t;if(200===e){const{code:t,message:e,data:n}=a;return 0===t?n:Promise.reject(e)}return Promise.reject("error")}));const w={name:"Loading",props:{icon:{default:"loading",type:String},size:{default:"default",type:String},loading:Boolean,error:String}},_=r("data-v-02aa36a4");e("data-v-02aa36a4");const k={key:0,class:"loading-wrap"},T={key:1,class:"error"};a();const $=_(((t,e,a,r,c,d)=>a.loading||a.error?(n(),s("div",k,[a.loading?(n(),s("i",{key:0,class:["iconfont","loading",`i-${a.icon}`,a.size]},null,2)):a.error?(n(),s("span",T,o(a.error),1)):i("",!0)])):l(t.$slots,"default",{key:1})));w.render=$,w.__scopeId="data-v-02aa36a4";var L={name:"Article",props:["news"]};const B=r("data-v-5d34eb05");e("data-v-5d34eb05");const V={class:"post-card"},E={class:"content"};a();const C=B(((t,e,a,i,l,r)=>(n(),s("article",V,[c("img",{src:a.news.cover,alt:"news cover",class:"cover"},null,8,["src"]),c("div",E,[c("p",null,o(a.news.date),1),c("p",null,o(a.news.title),1)])]))));L.render=C,L.__scopeId="data-v-5d34eb05";var I={name:"Home",components:{Loading:w,Article:L},data:()=>({loading:!1,list:[]}),async mounted(){this.loading=!0;const{list:e}=await async function(){return t.get("/news")}();this.list=e,this.loading=!1,x("I Believe")}};const j=r("data-v-29424dcb");e("data-v-29424dcb");const R={class:"article-list"},S=c("div",{class:"footer"},"～over～",-1);a();const M=j(((t,e)=>{const a=d("Article"),o=d("router-link"),i=d("Loading");return n(),s(i,{loading:t.loading,size:"large"},{default:j((()=>[c("div",R,[(n(!0),s(p,null,u(t.list,(t=>(n(),s(o,{custom:"",key:t.id,to:`/detail/${t.id}`},{default:j((({navigate:e})=>[c(a,{news:t,onClick:e,role:"link"},null,8,["news","onClick"])])),_:2},1032,["to"])))),128))]),S])),_:1},8,["loading"])}));I.render=M,I.__scopeId="data-v-29424dcb";var P={name:"TranslateBox",components:{Loading:w},props:{position:{required:!0,type:Object},text:{required:!0,type:String},visible:{required:!0,type:Boolean},btnVisible:{required:!0,type:Boolean}},data:()=>({translation:{},loading:!1}),computed:{pos(){const{clientWidth:t,clientHeight:e}=document.body,{x:a=0,y:n=0}=this.position,s=t-a,o=e-n,i=n>40?n-40:n,l=o+20;return s<=a&&o<=n?{bottom:`${l}px`,right:`${s}px`}:s<=a?{top:`${i}px`,right:`${s}px`}:o<=n?{bottom:`${l}px`,left:`${a}px`}:{top:`${i}px`,left:`${a}px`}}},methods:{async showTranslation(){this.$emit("hide"),this.$emit("show"),this.loading=!0,this.translation=null;const{list:e}=await async function(e){return t.post("/translate",{q:e})}(this.text);if(e&&e.length>0){const[t]=e;console.log(t),this.translation=t}this.loading=!1}}};const U=r("data-v-12f16c6a");e("data-v-12f16c6a");const A={key:0,class:"content"},q={key:0},z={class:"before"},D=c("span",null,"S: ",-1),O={class:"after"},F=c("span",{class:"dst"},"D: ",-1);a();const H=U(((t,e)=>{const a=d("Loading");return n(),s("div",{class:"translate",style:t.pos},[h(c("i",{class:"iconfont i-fanyi",onClick:e[1]||(e[1]=(...e)=>t.showTranslation&&t.showTranslation(...e))},null,512),[[g,t.btnVisible]]),c(a,{loading:t.loading,icon:"translater",size:"small"},{default:U((()=>[t.visible?(n(),s("div",A,[t.translation?(n(),s(p,{key:1},[c("p",z,[D,c("span",null,o(t.translation.src),1)]),c("p",O,[F,c("span",null,o(t.translation.dst),1)])],64)):(n(),s("div",q,"No result"))])):i("",!0)])),_:1},8,["loading"])],4)}));P.render=H,P.__scopeId="data-v-12f16c6a";var N={name:"Detail",components:{Loading:w,TranslateBox:P},data:()=>({loading:!1,exceptionText:"",audioEl:{},paused:!0,article:{},translatePos:{},translateText:"",translateVisible:!1,translateBtnVisible:!1}),async mounted(){const{id:e}=this.$route.params;this.loading=!0;try{const a=await async function(e){return t.post("/news/detail",{id:e})}(String(e));if(a){const{date:t,title:e}=a;this.article=a,x(`(${t}) ${e}`)}}catch(a){const t="string"==typeof a?a:"error";this.exceptionText=t,x(t)}this.loading=!1,this.$nextTick((()=>{this.audioEl=this.$refs.audio}))},methods:{play(){this.audioEl&&(this.audioEl.play(),this.paused=!1)},pause(){this.audioEl&&(this.audioEl.pause(),this.paused=!0)},ended(){this.paused=!0},getContextmenu(t){const{x:e,y:a}=t;this.translatePos={x:e,y:a};const n=window.getSelection();if(n){const t=n.getRangeAt(0),e=String(t);e&&(this.translateText=e,this.translateBtnVisible=!0)}},hideTranslate(){this.translateVisible=!1,this.translateBtnVisible=!1}}};const W=r("data-v-ac5f9788");e("data-v-ac5f9788");const G={class:"footer"},J=m(" from: ");a();const K=W(((t,e)=>{const a=d("router-link"),o=d("TranslateBox"),i=d("Loading");return n(),s(i,{loading:t.loading,error:t.exceptionText,size:"large"},{default:W((()=>[c("div",{class:"transcript",onContextmenu:e[1]||(e[1]=f(((...e)=>t.getContextmenu&&t.getContextmenu(...e)),["prevent"])),onTouchstart:e[2]||(e[2]=(...e)=>t.hideTranslate&&t.hideTranslate(...e))},[c("div",{innerHTML:t.article.transcript},null,8,["innerHTML"]),h(c("p",G,[J,c("a",{href:t.article.src},"pbs",8,["href"])],512),[[g,t.article.transcript]])],32),c("audio",{src:t.article.src,onEnded:e[3]||(e[3]=(...e)=>t.ended&&t.ended(...e)),ref:"audio"},null,40,["src"]),c("div",{class:"action",style:{backgroundImage:`url(${t.article.cover})`}},[t.paused?(n(),s("i",{key:0,class:"iconfont i-play",onClick:e[4]||(e[4]=(...e)=>t.play&&t.play(...e))})):(n(),s("i",{key:1,class:"iconfont i-pause",onClick:e[5]||(e[5]=(...e)=>t.pause&&t.pause(...e))})),c(a,{to:"/",custom:""},{default:W((({navigate:t})=>[c("i",{class:"iconfont i-home",onClick:t},null,8,["onClick"])])),_:1})],4),c(o,{text:t.translateText,position:t.translatePos,visible:t.translateVisible,btnVisible:t.translateBtnVisible,onShow:e[6]||(e[6]=e=>t.translateVisible=!0),onHide:e[7]||(e[7]=e=>t.translateBtnVisible=!1)},null,8,["text","position","visible","btnVisible"])])),_:1},8,["loading","error"])}));N.render=K,N.__scopeId="data-v-ac5f9788";var Q={name:"NotFound"};const X=r("data-v-f2df4c1a");e("data-v-f2df4c1a");const Y={class:"content"};a();const Z=X(((t,e,a,o,i,l)=>(n(),s("div",Y,"404 Not Found"))));Q.render=Z,Q.__scopeId="data-v-f2df4c1a";const{BASE_URL:tt}={VITE_API:"http://chenggang.win:9000/api",BASE_URL:"/chunsheng/",MODE:"production",DEV:!1,PROD:!0},et=[{path:"/",component:I},{path:"/detail/:id",component:N},{path:"/:pathMatch(.*)*",component:Q}];var at=v({history:b(tt),routes:et}),nt={name:"App"};const st=r("data-v-1d8f75b8");e("data-v-1d8f75b8");const ot={class:"container"};a();const it=st(((t,e,a,o,i,l)=>{const r=d("router-view");return n(),s("div",ot,[c(r)])}));nt.render=it,nt.__scopeId="data-v-1d8f75b8";const lt=y(nt);lt.use(at),lt.mount("#app");
