var e=(e,t,a)=>new Promise(((n,o)=>{var s=e=>{try{r(a.next(e))}catch(t){o(t)}},l=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,l);r((a=a.apply(e,t)).next())}));import{a as t,p as a,b as n,o,c as s,t as l,d as r,r as i,w as c,e as u,f as d,g as p,h as v,F as g,i as m,j as f,k as h,v as b,u as y,l as x,m as w,n as T,q as k,s as E}from"./vendor.10fd0eeb.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const l=new URL(e,n);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const r=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){s(new Error(`Failed to import: ${e}`)),o(i)},onload(){a(self[t].moduleMap[l]),o(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/assets/");const _={lt:"",gt:"",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦","#8226":"•","#8212":"—"};function q(e){const{env:t,biz:a}=window.dd;"notInDingTalk"!==t.platform?a.navigation.setTitle({title:e}):document.title=e}function $(a){return e(this,null,(function*(){return t.post("/translate",{q:a})}))}t.defaults.baseURL="https://api.chenggang.win/api",t.defaults.headers.post["Content-Type"]="application/json",t.interceptors.request.use((e=>e),(e=>Promise.reject(e))),t.interceptors.response.use((e=>{const{status:t,data:a}=e;if(200===t){const{code:e,message:t,data:n}=a;return 0===e?n:Promise.reject(t)}return Promise.reject("error")}));const I={name:"Loading",props:{icon:{type:String,default:"loading"},size:{type:String,default:"default"},loading:Boolean,error:String}},O=c("data-v-4aa9940a");a("data-v-4aa9940a");const B={key:0,class:"loading-wrap"},C={key:1,class:"error"};n();const L=O(((e,t,a,n,c,u)=>a.loading||a.error?(o(),s("div",B,[a.loading?(o(),s("i",{key:0,class:["iconfont","loading",`i-${a.icon}`,a.size]},null,2)):a.error?(o(),s("span",C,l(a.error),1)):r("",!0)])):i(e.$slots,"default",{key:1})));I.render=L,I.__scopeId="data-v-4aa9940a";const S=[10,102,1004,1016],j=Math.floor(Math.random()*S.length);var A={name:"Article",props:{news:{type:Object,default:{},required:!0}},setup(e){const t=u(`./place/${S[j]}.jpg`),a=u(null);return d((()=>{if("IntersectionObserver"in window){const t=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const a=t.target;setTimeout((()=>{/\place\/\d+\.jpg/.test(a.src)&&(a.src=e.news.cover)}),300)}}))}));a.value&&t.observe(a.value)}})),{place:t,image:a}}};const P=c("data-v-aa8f76b6");a("data-v-aa8f76b6");const M={class:"post-card"},R={class:"content"};n();const U=P(((e,t)=>(o(),s("article",M,[p("img",{src:e.place,alt:"news cover",class:"cover",ref:"image"},null,8,["src"]),p("div",R,[p("p",null,l(e.news.date),1),p("p",null,l(e.news.title),1)])]))));A.render=U,A.__scopeId="data-v-aa8f76b6";var V={components:{Loading:I,Article:A},setup(){const a=u(!1),n=u([]);return d((()=>e(this,null,(function*(){a.value=!0;const{list:o}=yield function(){return e(this,null,(function*(){return t.get("/news")}))}();n.value=o,a.value=!1,q("I Believe")})))),{loading:a,news:n}}};const z=c("data-v-397638ab");a("data-v-397638ab");const D={class:"article-list"},N=p("div",{class:"footer"},"～over～",-1);n();const H=z(((e,t,a,n,l,r)=>{const i=v("Article"),c=v("router-link"),u=v("Loading");return o(),s(u,{loading:n.loading,size:"large"},{default:z((()=>[p("div",D,[(o(!0),s(g,null,m(n.news,(e=>(o(),s(c,{custom:"",key:e.id,to:`/detail/${e.id}`},{default:z((({navigate:t})=>[p(i,{news:e,onClick:t,role:"link"},null,8,["news","onClick"])])),_:2},1032,["to"])))),128))]),N])),_:1},8,["loading"])}));V.render=H,V.__scopeId="data-v-397638ab";var F={name:"TranslateBox",components:{Loading:I},props:{position:{type:Object,required:!0},text:{type:String,required:!0},visible:{type:Boolean,required:!0},btnVisible:{type:Boolean,required:!0}},setup(t,{emit:a}){const n=u(null),o=u(!1);const s=f((()=>{const{clientWidth:e,clientHeight:a}=document.documentElement,{x:n=0,y:o=0}=t.position,s=e-n,l=a-o,r=o>40?o-40:o,i=l+20;return s<=n&&l<=o?{bottom:`${i}px`,right:`${s}px`}:s<=n?{top:`${r}px`,right:`${s}px`}:l<=o?{bottom:`${i}px`,left:`${n}px`}:{top:`${r}px`,left:`${n}px`}}));return{translation:n,loading:o,showTranslation:function(){return e(this,null,(function*(){a("hide-btn"),a("show-box"),o.value=!0,n.value=null;const{list:e}=yield $(t.text);if(e&&e.length>0){const[t]=e;n.value=t}o.value=!1}))},pos:s}}};const Y=c("data-v-02141643");a("data-v-02141643");const W={key:0,class:"content"},X={key:0},G={class:"before"},K=p("span",null,"S: ",-1),Z={class:"after"},J=p("span",{class:"dst"},"D: ",-1);n();const Q=Y(((e,t,a,n,i,c)=>{const u=v("Loading");return o(),s("div",{class:"translate",style:n.pos},[h(p("i",{class:"iconfont i-fanyi",onClick:t[1]||(t[1]=(...e)=>n.showTranslation&&n.showTranslation(...e))},null,512),[[b,a.btnVisible]]),p(u,{loading:n.loading,icon:"translater",size:"small"},{default:Y((()=>[a.visible?(o(),s("div",W,[n.translation?(o(),s(g,{key:1},[p("p",G,[K,p("span",null,l(n.translation.src),1)]),p("p",Z,[J,p("span",null,l(n.translation.dst),1)])],64)):(o(),s("div",X,"No result"))])):r("",!0)])),_:1},8,["loading"])],4)}));function ee(){return{parseText:function(e){let t=e.replace(/(\r\n|\n|\r)/gm,"");for(let n in _){const e=new RegExp("&"+n+";","g");t=t.replace(e,_[n])}const a=t.match(/<p[^>]*>(.*?)<\/p>/gm);if(a)return a.map((e=>{if(e.includes("</strong>")){const t=/<p><strong[^>]*>(.*?)<\/strong><\/p>/g;return{type:"title",value:e.replace(t,"$1")}}return{type:"text",value:e.replace(/<p[^>]*>(.*?)<\/p>/g,"$1")}}))},doTranslate:function(t,a,n){return e(this,null,(function*(){if(n)return t.map((e=>e.value===a?(e.trans="",e):e));{const{list:e}=yield $(a);if(e&&e.length>0){const[n]=e;return t.map((e=>e.value===a?(e.trans=n.dst,e):e))}}}))},getMousePos:function(e){const{x:t,y:a}=e,n=window.getSelection();if(n){const e=n.getRangeAt(0);return{x:t,y:a,sectionText:String(e)}}}}}function te(a){const n=u(!1),o=u(""),s=u(""),l=u(null),r=u([]),{parseText:i}=ee();return d((()=>e(this,null,(function*(){n.value=!0;try{const n=yield function(a){return e(this,null,(function*(){return t.post("/news/detail",{id:a})}))}(String(a));if(n){const{date:e,title:t}=n;if(l.value=n,n.transcript){const e=i(n.transcript);e&&(r.value=e)}s.value=`(${e}) ${t}`}}catch(c){const e="string"==typeof c?c:"error";o.value=e,s.value=e}n.value=!1})))),{news:l,texts:r,loading:n,exceptionText:o,docTitle:s}}F.render=Q,F.__scopeId="data-v-02141643";var ae={name:"Detail",components:{Loading:I,TranslateBox:F},setup(){const e=u(!0),t=u(!1),a=u(!1),n=u(""),o=u({x:0,y:0}),s=u(null),l=u(null),r=u(0),i=u(0),c=u(0),p=u(0),{getMousePos:v,doTranslate:g}=ee(),m=y(),{id:f}=m.params,{news:h,texts:b,loading:x,exceptionText:w,docTitle:T}=te(Number(f));return d((()=>{q(T.value)})),{loading:x,exceptionText:w,audioEl:s,getContextmenu:function(e){const t=v(e);if(t){const{x:e,y:s,sectionText:l}=t;n.value=l,o.value={x:e,y:s},a.value=!0}},texts:b,article:h,translateText:n,translatePos:o,translateVisible:t,translateBtnVisible:a,doTranslate:(e,t)=>{g(b.value,e,t)},hideTranslate:function(){t.value=!1,a.value=!1},paused:e,play:function(){s.value&&(s.value.play(),e.value=!1)},pause:function(){s.value&&(s.value.pause(),e.value=!0)},ended:function(){e.value=!0},actionBtn:l,touchStart(e){const{pageX:t,pageY:a}=e.targetTouches[0];if(r.value=t,i.value=a,l.value){const{style:e,offsetLeft:t,offsetTop:a,offsetWidth:n,offsetHeight:o}=l.value;c.value=t+n,p.value=a+o,e.boxShadow="0 0 10px rgba(0, 0, 0, .5)"}},touchEnd(){l.value&&(l.value.style.boxShadow="none")},touchMove(e){e.preventDefault();const{clientHeight:t,clientWidth:a}=document.documentElement,{pageX:n,pageY:o}=e.targetTouches[0],s=n-r.value,u=o-i.value;if(l.value){const{style:e}=l.value;e.right=a-(c.value+s)+"px",e.bottom=t-(p.value+u)+"px"}}}}};const ne=c("data-v-249811db");a("data-v-249811db");const oe={class:"transcript-wrap"},se={key:0,class:"title"},le={class:"text"},re={key:1,class:"transcript"},ie=p("p",{class:"text"},"The transcript is on the way!",-1),ce={class:"footer"},ue=w(" from: ");n();const de=ne(((e,t,a,n,r,i)=>{const c=v("router-link"),u=v("TranslateBox"),d=v("Loading");return o(),s("div",oe,[p(d,{loading:n.loading,error:n.exceptionText,size:"large"},{default:ne((()=>{var e,a,r,i,d;return[(null==(e=n.article)?void 0:e.transcript)?(o(),s("div",{key:0,class:"transcript",onContextmenu:t[1]||(t[1]=x(((...e)=>n.getContextmenu&&n.getContextmenu(...e)),["prevent"])),onClick:t[2]||(t[2]=(...e)=>n.hideTranslate&&n.hideTranslate(...e)),onTouchstart:t[3]||(t[3]=(...e)=>n.hideTranslate&&n.hideTranslate(...e))},[(o(!0),s(g,null,m(n.texts,(e=>(o(),s(g,{key:e.type+e.value},["title"===e.type?(o(),s("p",se,l(e.value),1)):(o(),s(g,{key:1},[p("p",le,[p("span",null,l(e.value),1),p("span",null,[p("i",{class:"iconfont i-translater",onClick:t=>n.doTranslate(e.value,e.trans)},null,8,["onClick"])])]),h(p("p",{class:"text trans"},l(e.trans),513),[[b,e.trans]])],64))],64)))),128))],32)):(o(),s("div",re,[ie])),h(p("p",ce,[ue,p("a",{href:null==(a=n.article)?void 0:a.source},"pbs",8,["href"])],512),[[b,null==(r=n.article)?void 0:r.source]]),p("audio",{src:null==(i=n.article)?void 0:i.src,onEnded:t[4]||(t[4]=(...e)=>n.ended&&n.ended(...e)),ref:"audioEl"},null,40,["src"]),p("div",{class:"action",ref:"actionBtn",onTouchstart:t[7]||(t[7]=(...e)=>n.touchStart&&n.touchStart(...e)),onTouchend:t[8]||(t[8]=(...e)=>n.touchEnd&&n.touchEnd(...e)),onTouchmove:t[9]||(t[9]=(...e)=>n.touchMove&&n.touchMove(...e)),style:{backgroundImage:`url(${null==(d=n.article)?void 0:d.cover})`}},[n.paused?(o(),s("i",{key:0,class:"iconfont i-play",onClick:t[5]||(t[5]=(...e)=>n.play&&n.play(...e))})):(o(),s("i",{key:1,class:"iconfont i-pause",onClick:t[6]||(t[6]=(...e)=>n.pause&&n.pause(...e))})),p(c,{to:"/",custom:""},{default:ne((({navigate:e})=>[p("i",{class:"iconfont i-home",onClick:e},null,8,["onClick"])])),_:1})],36),p(u,{text:n.translateText,position:n.translatePos,visible:n.translateVisible,btnVisible:n.translateBtnVisible,onShowBox:t[10]||(t[10]=e=>n.translateVisible=!0),onHideBtn:t[11]||(t[11]=e=>n.translateBtnVisible=!1)},null,8,["text","position","visible","btnVisible"])]})),_:1},8,["loading","error"])])}));ae.render=de,ae.__scopeId="data-v-249811db";var pe={name:"NotFound"};const ve=c("data-v-f2df4c1a");a("data-v-f2df4c1a");const ge={class:"content"};n();const me=ve(((e,t,a,n,l,r)=>(o(),s("div",ge,"404 Not Found"))));pe.render=me,pe.__scopeId="data-v-f2df4c1a";const{BASE_URL:fe}={VITE_API:"https://api.chenggang.win/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},he=[{path:"/",component:V},{path:"/detail/:id",component:ae},{path:"/:pathMatch(.*)*",component:pe}];var be=T({history:k(fe),routes:he}),ye={name:"App"};const xe=c("data-v-2cf36390");a("data-v-2cf36390");const we={class:"container"};n();const Te=xe(((e,t,a,n,l,r)=>{const i=v("router-view");return o(),s("div",we,[p(i)])}));ye.render=Te,ye.__scopeId="data-v-2cf36390";const ke=E(ye);ke.use(be),ke.mount("#app");
