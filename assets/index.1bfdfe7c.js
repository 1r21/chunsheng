var pe=Object.defineProperty,ve=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var q=(e,t,o)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,G=(e,t)=>{for(var o in t||(t={}))he.call(t,o)&&q(e,o,t[o]);if(U)for(var o of U(t))ge.call(t,o)&&q(e,o,t[o]);return e},J=(e,t)=>ve(e,fe(t));var F=(e,t,o)=>new Promise((l,s)=>{var n=d=>{try{c(o.next(d))}catch(p){s(p)}},a=d=>{try{c(o.throw(d))}catch(p){s(p)}},c=d=>d.done?l(d.value):Promise.resolve(d.value).then(n,a);c((o=o.apply(e,t)).next())});import{d as O,o as i,c as _,n as ye,t as w,a as Q,r as me,b as u,e as M,f as r,g as xe,h as z,i as Y,j as K,w as L,k as Z,F as H,p as P,l as R,m as S,q as be,s as A,v as D,u as ee,x as k,y as te,z as $e,A as ke,B as we,C as Ie,D as Te,E as Ee,G as Be,H as Ce,I as Se,J as Ne}from"./vendor.8735f004.js";const Ve=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}};Ve();var T=(e,t)=>{const o=e.__vccOpts||e;for(const[l,s]of t)o[l]=s;return o};const Fe={key:0,class:"loading-wrap"},He={key:1,class:"error"},Le=O({props:{icon:{default:"loading"},size:{default:"default"},loading:{type:Boolean},error:null},setup(e){return(t,o)=>e.loading||e.error?(i(),_("div",Fe,[e.loading?(i(),_("i",{key:0,class:ye(["iconfont","loading",`i-${e.icon}`,e.size])},null,2)):e.error?(i(),_("span",He,w(e.error),1)):Q("",!0)])):me(t.$slots,"default",{key:1},void 0,!0)}});var X=T(Le,[["__scopeId","data-v-ef7857a6"]]);const Oe={class:"post-card"},ze=["src"],Ae={class:"content"},De=O({props:{news:null},setup(e){const t=e,o=[1004,1016],l=Math.floor(Math.random()*o.length),s=d=>`./place/${d[l]}.jpg`,n=u(s(o)),a=u(null);function c(){n.value=s([10,102])}return M(()=>{if("IntersectionObserver"in window){const d=new IntersectionObserver(p=>{p.forEach(h=>{if(h.isIntersecting){const b=h.target;setTimeout(()=>{/place\/1004|1016\.jpg/.test(b.src)&&(n.value=t.news.cover)},300)}})});a.value&&d.observe(a.value)}}),(d,p)=>(i(),_("article",Oe,[r("img",{src:n.value,alt:"Fetch cover err",class:"cover",ref_key:"image",ref:a,onError:c},null,40,ze),r("div",Ae,[r("p",null,w(e.news.date),1),r("p",null,w(e.news.title),1)])]))}});var Me=T(De,[["__scopeId","data-v-171bc0bc"]]);const Ye=e=>(P("data-v-0e701d23"),e=e(),R(),e),Pe={class:"article-list"},Re=Ye(()=>r("div",{class:"footer"},"\uFF5Eover\uFF5E",-1)),Xe=O({setup(e){const t=u(!1),o=u([]);return M(()=>F(this,null,function*(){t.value=!0;const{list:l}=yield xe();o.value=l,t.value=!1,z("I Believe")})),(l,s)=>{const n=Y("router-link");return i(),K(X,{loading:t.value,size:"large"},{default:L(()=>[r("div",Pe,[(i(!0),_(H,null,Z(o.value,a=>(i(),K(n,{custom:"",key:a.id,to:`/detail/${a.id}`},{default:L(({navigate:c})=>[S(Me,{news:a,onClick:c,role:"link"},null,8,["news","onClick"])]),_:2},1032,["to"]))),128))]),Re]),_:1},8,["loading"])}}});var We=T(Xe,[["__scopeId","data-v-0e701d23"]]);const oe=e=>(P("data-v-89d51650"),e=e(),R(),e),je={key:0,class:"content"},Ue={key:0},qe={class:"before"},Ge=oe(()=>r("span",null,"S:",-1)),Je={class:"after"},Ke=oe(()=>r("span",{class:"dst"},"D:",-1)),Qe=O({props:{position:null,text:null,visible:{type:Boolean},btnVisible:{type:Boolean}},emits:["hide-btn","show-box"],setup(e,{emit:t}){const o=e,l=u(null),s=u(!1);function n(){return F(this,null,function*(){t("hide-btn"),t("show-box"),s.value=!0,l.value=null;const{list:c}=yield te(o.text);if(c&&c.length>0){const[d]=c;l.value=d}s.value=!1})}const a=be(()=>{const{clientWidth:c,clientHeight:d}=document.documentElement,{x:p=0,y:h=0}=o.position,b=c-p,N=d-h,V=40,$=h>V?h-V:h,E=N+V/2;return b<=p&&N<=h?{bottom:`${E}px`,right:`${b}px`}:b<=p?{top:`${$}px`,right:`${b}px`}:N<=h?{bottom:`${E}px`,left:`${p}px`}:{top:`${$}px`,left:`${p}px`}});return(c,d)=>(i(),_("div",{class:"translate",style:ee(k(a))},[A(r("i",{class:"iconfont i-fanyi",onClick:n},null,512),[[D,e.btnVisible]]),S(X,{loading:s.value,icon:"translater",size:"small"},{default:L(()=>[e.visible?(i(),_("div",je,[l.value?(i(),_(H,{key:1},[r("p",qe,[Ge,r("span",null,w(l.value.src),1)]),r("p",Je,[Ke,r("span",null,w(l.value.dst),1)])],64)):(i(),_("div",Ue,"No result"))])):Q("",!0)]),_:1},8,["loading"])],4))}});var Ze=T(Qe,[["__scopeId","data-v-89d51650"]]);function et(e){const t=u(!1),o=u(""),l=u(null),s=u([]);return M(()=>F(this,null,function*(){t.value=!0;try{const n=yield $e(String(e));if(n&&(l.value=n,n.transcript)){const a=ke(n.transcript);a&&(s.value=a)}}catch(n){const a=typeof n=="string"?n:"error";o.value=a}t.value=!1})),{news:l,texts:s,loading:t,exceptionText:o}}const tt=e=>(P("data-v-a3288b92"),e=e(),R(),e),ot={class:"transcript-wrap"},st=["onContextmenu"],nt={key:0,class:"title"},at={class:"text"},lt=["onClick"],rt={key:1,class:"transcript"},ct=tt(()=>r("p",{class:"text"},"The transcript is on the way!",-1)),it=[ct],ut={class:"footer"},dt=Ee(" from: "),_t=["href"],pt=["src"],vt=["onClick"],ft=O({setup(e){const t=u(!0),o=u(!1),l=u(!1),s=u(""),n=u({x:0,y:0}),a=u(null),c=u(null),d=u(0),p=u(0),h=u(0),b=u(0),N=Ie(),{id:V}=N.params,{news:$,texts:E,loading:W,exceptionText:ne}=et(Number(V));we(()=>{var g;W.value?z("loading..."):z((g=$.value)==null?void 0:g.date)});function ae(g){const v=Be(g);if(v){const{x:m,y:x,sectionText:y}=v;s.value=y,n.value={x:m,y:x},l.value=!0}}function le(){a.value&&(a.value.play(),t.value=!1)}function re(){a.value&&(a.value.pause(),t.value=!0)}function ce(){t.value=!0}function ie(g,v){return F(this,null,function*(){if(!v){const{list:m=[]}=yield te(g);if(m&&m.length){const[x]=m;E.value=E.value.map(y=>J(G({},y),{trans:y.type==="text"&&y.value===x.src?x.dst:""}))}}})}function j(){o.value=!1,l.value=!1}function ue(g){const{pageX:v,pageY:m}=g.targetTouches[0];if(d.value=v,p.value=m,c.value){const{style:x,offsetLeft:y,offsetTop:B,offsetWidth:C,offsetHeight:I}=c.value;h.value=y+C,b.value=B+I,x.boxShadow="0 0 10px rgba(0, 0, 0, .5)"}}function de(){c.value&&(c.value.style.boxShadow="none")}function _e(g){g.preventDefault();const{clientHeight:v,clientWidth:m}=document.documentElement,{pageX:x,pageY:y}=g.targetTouches[0],B=x-d.value,C=y-p.value;if(c.value){const{style:I}=c.value;I.right=`${m-(h.value+B)}px`,I.bottom=`${v-(b.value+C)}px`}}return(g,v)=>{const m=Y("router-link");return i(),_("div",ot,[S(X,{loading:k(W),error:k(ne),size:"large"},{default:L(()=>{var x,y,B,C,I;return[((x=k($))==null?void 0:x.transcript)?(i(),_("div",{key:0,class:"transcript",onContextmenu:Te(ae,["prevent"]),onClick:j,onTouchstart:j},[(i(!0),_(H,null,Z(k(E),f=>(i(),_(H,{key:f.type+f.value},[f.type==="title"?(i(),_("p",nt,w(f.value),1)):(i(),_(H,{key:1},[r("p",at,[r("span",null,w(f.value),1),r("span",null,[r("i",{class:"iconfont i-translater",onClick:Bt=>ie(f.value,f.trans)},null,8,lt)])]),A(r("p",{class:"text trans"},w(f.trans),513),[[D,f.trans]])],64))],64))),128))],40,st)):(i(),_("div",rt,it)),A(r("p",ut,[dt,r("a",{href:(y=k($))==null?void 0:y.source,target:"__blank"},"pbs",8,_t)],512),[[D,(B=k($))==null?void 0:B.source]]),r("audio",{src:(C=k($))==null?void 0:C.src,onEnded:ce,ref_key:"audioEl",ref:a},null,40,pt),r("div",{class:"action",ref_key:"actionBtn",ref:c,onTouchstart:ue,onTouchend:de,onTouchmove:_e,style:ee({backgroundImage:`url(${(I=k($))==null?void 0:I.cover})`})},[t.value?(i(),_("i",{key:0,class:"iconfont i-play",onClick:le})):(i(),_("i",{key:1,class:"iconfont i-pause",onClick:re})),S(m,{to:"/",custom:""},{default:L(({navigate:f})=>[r("i",{class:"iconfont i-home",onClick:f},null,8,vt)]),_:1})],36),S(Ze,{text:s.value,position:n.value,visible:o.value,btnVisible:l.value,onShowBox:v[0]||(v[0]=f=>o.value=!0),onHideBtn:v[1]||(v[1]=f=>l.value=!1)},null,8,["text","position","visible","btnVisible"])]}),_:1},8,["loading","error"])])}}});var ht=T(ft,[["__scopeId","data-v-a3288b92"]]);const gt={},yt={class:"content"};function mt(e,t){return i(),_("div",yt,"404 Not Found")}var xt=T(gt,[["render",mt],["__scopeId","data-v-432e681e"]]);const{BASE_URL:bt}={VITE_API_HOST:"https://api.1r21.cn",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},$t=[{path:"/",component:We},{path:"/detail/:id",component:ht},{path:"/:pathMatch(.*)*",component:xt}];var kt=Ce({history:Se(bt),routes:$t});const wt={},It={class:"container"};function Tt(e,t){const o=Y("router-view");return i(),_("div",It,[S(o)])}var Et=T(wt,[["render",Tt],["__scopeId","data-v-79ebb873"]]);const se=Ne(Et);se.use(kt);se.mount("#app");
