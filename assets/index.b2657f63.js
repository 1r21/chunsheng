var t=(t,e,a)=>new Promise(((n,s)=>{var i=t=>{try{r(a.next(t))}catch(e){s(e)}},o=t=>{try{r(a.throw(t))}catch(e){s(e)}},r=t=>t.done?n(t.value):Promise.resolve(t.value).then(i,o);r((a=a.apply(t,e)).next())}));import{a as e,p as a,b as n,o as s,c as i,t as o,d as r,r as l,w as c,e as d,f as u,F as p,g as m,h as g,v as h,i as f,j as v,k as b,l as y,m as x}from"./vendor.128554a3.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(a){const n=new URL(t,location),s=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((a,i)=>{const o=new URL(t,n);if(self[e].moduleMap[o])return a(self[e].moduleMap[o]);const r=new Blob([`import * as m from '${o}';`,`${e}.moduleMap['${o}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){i(new Error(`Failed to import: ${t}`)),s(l)},onload(){a(self[e].moduleMap[o]),s(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/assets/");const w={lt:"",gt:"",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦","#8226":"•","#8212":"—"};function k(t){const{env:e,biz:a}=window.dd;"notInDingTalk"!==e.platform?a.navigation.setTitle({title:t}):document.title=t}function T(a){return t(this,null,(function*(){return e.post("/translate",{q:a})}))}e.defaults.baseURL="https://api.chenggang.win/api",e.defaults.headers.post["Content-Type"]="application/json",e.interceptors.request.use((t=>t),(t=>Promise.reject(t))),e.interceptors.response.use((t=>{const{status:e,data:a}=t;if(200===e){const{code:t,message:e,data:n}=a;return 0===t?n:Promise.reject(e)}return Promise.reject("error")}));const $={name:"Loading",props:{icon:{default:"loading",type:String},size:{default:"default",type:String},loading:Boolean,error:String}},E=c("data-v-78b4e08a");a("data-v-78b4e08a");const _={key:0,class:"loading-wrap"},I={key:1,class:"error"};n();const q=E(((t,e,a,n,c,d)=>a.loading||a.error?(s(),i("div",_,[a.loading?(s(),i("i",{key:0,class:["iconfont","loading",`i-${a.icon}`,a.size]},null,2)):a.error?(s(),i("span",I,o(a.error),1)):r("",!0)])):l(t.$slots,"default",{key:1})));$.render=q,$.__scopeId="data-v-78b4e08a";const C=[10,102,1004,1016],O=Math.floor(Math.random()*C.length);var L={name:"Article",props:["news"],data:()=>({place:`./place/${C[O]}.jpg`}),mounted(){if("IntersectionObserver"in window){new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const e=t.target;setTimeout((()=>{/\place\/\d+\.jpg/.test(e.src)&&(e.src=this.news.cover)}),300)}}))})).observe(this.$refs.image)}}};const A=c("data-v-7a824a1c");a("data-v-7a824a1c");const B={class:"post-card"},j={class:"content"};n();const P=A(((t,e)=>(s(),i("article",B,[d("img",{src:t.place,alt:"news cover",class:"cover",ref:"image"},null,8,["src"]),d("div",j,[d("p",null,o(t.news.date),1),d("p",null,o(t.news.title),1)])]))));L.render=P,L.__scopeId="data-v-7a824a1c";var V={name:"Home",components:{Loading:$,Article:L},data:()=>({loading:!1,list:[]}),mounted(){return t(this,null,(function*(){this.loading=!0;const{list:a}=yield function(){return t(this,null,(function*(){return e.get("/news")}))}();this.list=a,this.loading=!1,k("I Believe")}))}};const R=c("data-v-1b4b63cb");a("data-v-1b4b63cb");const U={class:"article-list"},S=d("div",{class:"footer"},"～over～",-1);n();const z=R(((t,e)=>{const a=u("Article"),n=u("router-link"),o=u("Loading");return s(),i(o,{loading:t.loading,size:"large"},{default:R((()=>[d("div",U,[(s(!0),i(p,null,m(t.list,(t=>(s(),i(n,{custom:"",key:t.id,to:`/detail/${t.id}`},{default:R((({navigate:e})=>[d(a,{news:t,onClick:e,role:"link"},null,8,["news","onClick"])])),_:2},1032,["to"])))),128))]),S])),_:1},8,["loading"])}));V.render=z,V.__scopeId="data-v-1b4b63cb";var M={name:"TranslateBox",components:{Loading:$},props:{position:{required:!0,type:Object},text:{required:!0,type:String},visible:{required:!0,type:Boolean},btnVisible:{required:!0,type:Boolean}},data:()=>({translation:{},loading:!1}),computed:{pos(){const{clientWidth:t,clientHeight:e}=document.documentElement,{x:a=0,y:n=0}=this.position,s=t-a,i=e-n,o=n>40?n-40:n,r=i+20;return s<=a&&i<=n?{bottom:`${r}px`,right:`${s}px`}:s<=a?{top:`${o}px`,right:`${s}px`}:i<=n?{bottom:`${r}px`,left:`${a}px`}:{top:`${o}px`,left:`${a}px`}}},methods:{showTranslation(){return t(this,null,(function*(){this.$emit("hide"),this.$emit("show"),this.loading=!0,this.translation=null;const{list:t}=yield T(this.text);if(t&&t.length>0){const[e]=t;console.log(e),this.translation=e}this.loading=!1}))}}};const D=c("data-v-1fd246b2");a("data-v-1fd246b2");const N={key:0,class:"content"},F={key:0},H={class:"before"},Y=d("span",null,"S: ",-1),G={class:"after"},K=d("span",{class:"dst"},"D: ",-1);n();const W=D(((t,e)=>{const a=u("Loading");return s(),i("div",{class:"translate",style:t.pos},[g(d("i",{class:"iconfont i-fanyi",onClick:e[1]||(e[1]=(...e)=>t.showTranslation&&t.showTranslation(...e))},null,512),[[h,t.btnVisible]]),d(a,{loading:t.loading,icon:"translater",size:"small"},{default:D((()=>[t.visible?(s(),i("div",N,[t.translation?(s(),i(p,{key:1},[d("p",H,[Y,d("span",null,o(t.translation.src),1)]),d("p",G,[K,d("span",null,o(t.translation.dst),1)])],64)):(s(),i("div",F,"No result"))])):r("",!0)])),_:1},8,["loading"])],4)}));M.render=W,M.__scopeId="data-v-1fd246b2";var X={name:"Detail",components:{Loading:$,TranslateBox:M},data:()=>({loading:!1,exceptionText:"",audioEl:{},paused:!0,article:{},texts:[],translatePos:{},translateText:"",translateVisible:!1,translateBtnVisible:!1}),mounted(){return t(this,null,(function*(){const{id:a}=this.$route.params;this.loading=!0;try{const n=yield function(a){return t(this,null,(function*(){return e.post("/news/detail",{id:a})}))}(String(a));if(n){const{date:t,title:e}=n;this.article=n,this.parseText(n),k(`(${t}) ${e}`)}}catch(n){const t="string"==typeof n?n:"error";this.exceptionText=t,k(t)}this.loading=!1,this.$nextTick((()=>{this.audioEl=this.$refs.audio}))}))},methods:{play(){this.audioEl&&(this.audioEl.play(),this.paused=!1)},pause(){this.audioEl&&(this.audioEl.pause(),this.paused=!0)},ended(){this.paused=!0},getContextmenu(t){const{x:e,y:a}=t;this.translatePos={x:e,y:a};const n=window.getSelection();if(n){const t=n.getRangeAt(0),e=String(t);e&&(this.translateText=e,this.translateBtnVisible=!0)}},hideTranslate(){this.translateVisible=!1,this.translateBtnVisible=!1},parseText(t){let e=t.transcript.replace(/(\r\n|\n|\r)/gm,"");for(let n in w){const t=new RegExp("&"+n+";","g");e=e.replace(t,w[n])}const a=e.match(/<p[^>]*>(.*?)<\/p>/gm);a&&(this.texts=a.map((t=>{if(t.includes("</strong>")){const e=/<p><strong[^>]*>(.*?)<\/strong><\/p>/g;return{type:"title",value:t.replace(e,"$1")}}return{type:"text",value:t.replace(/<p[^>]*>(.*?)<\/p>/g,"$1")}})))},doTranslate(e,a){return t(this,null,(function*(){if(a)this.texts=this.texts.map((t=>t.value===e?(t.trans="",t):t));else{const{list:t}=yield T(e);if(t&&t.length>0){const[a]=t;this.texts=this.texts.map((t=>t.value===e?(t.trans=a.dst,t):t))}}}))}}};const Z=c("data-v-8e58373e");a("data-v-8e58373e");const J={key:0,class:"title"},Q={class:"text"},tt={class:"footer"},et=v(" from: ");n();const at=Z(((t,e)=>{const a=u("router-link"),n=u("TranslateBox"),r=u("Loading");return s(),i(r,{loading:t.loading,error:t.exceptionText,size:"large"},{default:Z((()=>[d("div",{class:"transcript",onContextmenu:e[1]||(e[1]=f(((...e)=>t.getContextmenu&&t.getContextmenu(...e)),["prevent"])),onClick:e[2]||(e[2]=(...e)=>t.hideTranslate&&t.hideTranslate(...e)),onTouchstart:e[3]||(e[3]=(...e)=>t.hideTranslate&&t.hideTranslate(...e))},[(s(!0),i(p,null,m(t.texts,(e=>(s(),i(p,{key:e.type+e.value},["title"===e.type?(s(),i("p",J,o(e.value),1)):(s(),i(p,{key:1},[d("p",Q,[d("span",null,o(e.value),1),d("span",null,[d("i",{class:"iconfont i-translater",onClick:a=>t.doTranslate(e.value,e.trans)},null,8,["onClick"])])]),g(d("p",{class:"text trans"},o(e.trans),513),[[h,e.trans]])],64))],64)))),128)),g(d("p",tt,[et,d("a",{href:t.article.source},"pbs",8,["href"])],512),[[h,t.article.transcript]])],32),d("audio",{src:t.article.src,onEnded:e[4]||(e[4]=(...e)=>t.ended&&t.ended(...e)),ref:"audio"},null,40,["src"]),d("div",{class:"action",style:{backgroundImage:`url(${t.article.cover})`}},[t.paused?(s(),i("i",{key:0,class:"iconfont i-play",onClick:e[5]||(e[5]=(...e)=>t.play&&t.play(...e))})):(s(),i("i",{key:1,class:"iconfont i-pause",onClick:e[6]||(e[6]=(...e)=>t.pause&&t.pause(...e))})),d(a,{to:"/",custom:""},{default:Z((({navigate:t})=>[d("i",{class:"iconfont i-home",onClick:t},null,8,["onClick"])])),_:1})],4),d(n,{text:t.translateText,position:t.translatePos,visible:t.translateVisible,btnVisible:t.translateBtnVisible,onShow:e[7]||(e[7]=e=>t.translateVisible=!0),onHide:e[8]||(e[8]=e=>t.translateBtnVisible=!1)},null,8,["text","position","visible","btnVisible"])])),_:1},8,["loading","error"])}));X.render=at,X.__scopeId="data-v-8e58373e";var nt={name:"NotFound"};const st=c("data-v-f2df4c1a");a("data-v-f2df4c1a");const it={class:"content"};n();const ot=st(((t,e,a,n,o,r)=>(s(),i("div",it,"404 Not Found"))));nt.render=ot,nt.__scopeId="data-v-f2df4c1a";const{BASE_URL:rt}={VITE_API:"https://api.chenggang.win/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},lt=[{path:"/",component:V},{path:"/detail/:id",component:X},{path:"/:pathMatch(.*)*",component:nt}];var ct=b({history:y(rt),routes:lt}),dt={name:"App"};const ut=c("data-v-2cf36390");a("data-v-2cf36390");const pt={class:"container"};n();const mt=ut(((t,e,a,n,o,r)=>{const l=u("router-view");return s(),i("div",pt,[d(l)])}));dt.render=mt,dt.__scopeId="data-v-2cf36390";const gt=x(dt);gt.use(ct),gt.mount("#app");
