import{a as t,p as e,b as a,o as s,c as n,t as i,d as o,r,w as l,e as c,f as d,F as p,g as u,h as m,v as g,i as h,j as f,k as v,l as b,m as y}from"./vendor.f0034e12.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(a){const s=new URL(t,location),n=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((a,i)=>{const o=new URL(t,s);if(self[e].moduleMap[o])return a(self[e].moduleMap[o]);const r=new Blob([`import * as m from '${o}';`,`${e}.moduleMap['${o}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){i(new Error(`Failed to import: ${t}`)),n(l)},onload(){a(self[e].moduleMap[o]),n(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/assets/");const x={lt:"",gt:"",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦","#8226":"•","#8212":"—"};function w(t){const{env:e,biz:a}=window.dd;"notInDingTalk"!==e.platform?a.navigation.setTitle({title:t}):document.title=t}async function k(e){return t.post("/translate",{q:e})}t.defaults.baseURL="https://api.chenggang.win/api",t.defaults.headers.post["Content-Type"]="application/json",t.interceptors.request.use((t=>t),(t=>Promise.reject(t))),t.interceptors.response.use((t=>{const{status:e,data:a}=t;if(200===e){const{code:t,message:e,data:s}=a;return 0===t?s:Promise.reject(e)}return Promise.reject("error")}));const T={name:"Loading",props:{icon:{default:"loading",type:String},size:{default:"default",type:String},loading:Boolean,error:String}},$=l("data-v-78b4e08a");e("data-v-78b4e08a");const E={key:0,class:"loading-wrap"},_={key:1,class:"error"};a();const I=$(((t,e,a,l,c,d)=>a.loading||a.error?(s(),n("div",E,[a.loading?(s(),n("i",{key:0,class:["iconfont","loading",`i-${a.icon}`,a.size]},null,2)):a.error?(s(),n("span",_,i(a.error),1)):o("",!0)])):r(t.$slots,"default",{key:1})));T.render=I,T.__scopeId="data-v-78b4e08a";const q=[10,102,1004,1016],C=Math.floor(Math.random()*q.length);var O={name:"Article",props:["news"],data:()=>({place:`./place/${q[C]}.jpg`}),mounted(){if("IntersectionObserver"in window){new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const e=t.target;setTimeout((()=>{/\place\/\d+\.jpg/.test(e.src)&&(e.src=this.news.cover)}),300)}}))})).observe(this.$refs.image)}}};const L=l("data-v-7a824a1c");e("data-v-7a824a1c");const A={class:"post-card"},B={class:"content"};a();const j=L(((t,e)=>(s(),n("article",A,[c("img",{src:t.place,alt:"news cover",class:"cover",ref:"image"},null,8,["src"]),c("div",B,[c("p",null,i(t.news.date),1),c("p",null,i(t.news.title),1)])]))));O.render=j,O.__scopeId="data-v-7a824a1c";var V={name:"Home",components:{Loading:T,Article:O},data:()=>({loading:!1,list:[]}),async mounted(){this.loading=!0;const{list:e}=await async function(){return t.get("/news")}();this.list=e,this.loading=!1,w("I Believe")}};const R=l("data-v-5af7f0d5");e("data-v-5af7f0d5");const U={class:"article-list"},P=c("div",{class:"footer"},"～over～",-1);a();const S=R(((t,e)=>{const a=d("Article"),i=d("router-link"),o=d("Loading");return s(),n(o,{loading:t.loading,size:"large"},{default:R((()=>[c("div",U,[(s(!0),n(p,null,u(t.list,(t=>(s(),n(i,{custom:"",key:t.id,to:`/detail/${t.id}`},{default:R((({navigate:e})=>[c(a,{news:t,onClick:e,role:"link"},null,8,["news","onClick"])])),_:2},1032,["to"])))),128))]),P])),_:1},8,["loading"])}));V.render=S,V.__scopeId="data-v-5af7f0d5";var z={name:"TranslateBox",components:{Loading:T},props:{position:{required:!0,type:Object},text:{required:!0,type:String},visible:{required:!0,type:Boolean},btnVisible:{required:!0,type:Boolean}},data:()=>({translation:{},loading:!1}),computed:{pos(){const{clientWidth:t,clientHeight:e}=document.documentElement,{x:a=0,y:s=0}=this.position,n=t-a,i=e-s,o=s>40?s-40:s,r=i+20;return n<=a&&i<=s?{bottom:`${r}px`,right:`${n}px`}:n<=a?{top:`${o}px`,right:`${n}px`}:i<=s?{bottom:`${r}px`,left:`${a}px`}:{top:`${o}px`,left:`${a}px`}}},methods:{async showTranslation(){this.$emit("hide"),this.$emit("show"),this.loading=!0,this.translation=null;const{list:t}=await k(this.text);if(t&&t.length>0){const[e]=t;console.log(e),this.translation=e}this.loading=!1}}};const M=l("data-v-141b18c0");e("data-v-141b18c0");const D={key:0,class:"content"},N={key:0},F={class:"before"},H=c("span",null,"S: ",-1),Y={class:"after"},G=c("span",{class:"dst"},"D: ",-1);a();const K=M(((t,e)=>{const a=d("Loading");return s(),n("div",{class:"translate",style:t.pos},[m(c("i",{class:"iconfont i-fanyi",onClick:e[1]||(e[1]=(...e)=>t.showTranslation&&t.showTranslation(...e))},null,512),[[g,t.btnVisible]]),c(a,{loading:t.loading,icon:"translater",size:"small"},{default:M((()=>[t.visible?(s(),n("div",D,[t.translation?(s(),n(p,{key:1},[c("p",F,[H,c("span",null,i(t.translation.src),1)]),c("p",Y,[G,c("span",null,i(t.translation.dst),1)])],64)):(s(),n("div",N,"No result"))])):o("",!0)])),_:1},8,["loading"])],4)}));z.render=K,z.__scopeId="data-v-141b18c0";var W={name:"Detail",components:{Loading:T,TranslateBox:z},data:()=>({loading:!1,exceptionText:"",audioEl:{},paused:!0,article:{},texts:[],translatePos:{},translateText:"",translateVisible:!1,translateBtnVisible:!1}),async mounted(){const{id:e}=this.$route.params;this.loading=!0;try{const a=await async function(e){return t.post("/news/detail",{id:e})}(String(e));if(a){const{date:t,title:e}=a;this.article=a,this.parseText(a),w(`(${t}) ${e}`)}}catch(a){const t="string"==typeof a?a:"error";this.exceptionText=t,w(t)}this.loading=!1,this.$nextTick((()=>{this.audioEl=this.$refs.audio}))},methods:{play(){this.audioEl&&(this.audioEl.play(),this.paused=!1)},pause(){this.audioEl&&(this.audioEl.pause(),this.paused=!0)},ended(){this.paused=!0},getContextmenu(t){const{x:e,y:a}=t;this.translatePos={x:e,y:a};const s=window.getSelection();if(s){const t=s.getRangeAt(0),e=String(t);e&&(this.translateText=e,this.translateBtnVisible=!0)}},hideTranslate(){this.translateVisible=!1,this.translateBtnVisible=!1},parseText(t){let e=t.transcript.replace(/(\r\n|\n|\r)/gm,"");for(let s in x){const t=new RegExp("&"+s+";","g");e=e.replace(t,x[s])}const a=e.match(/<p[^>]*>(.*?)<\/p>/gm);a&&(this.texts=a.map((t=>{if(t.includes("</strong>")){const e=/<p><strong[^>]*>(.*?)<\/strong><\/p>/g;return{type:"title",value:t.replace(e,"$1")}}return{type:"text",value:t.replace(/<p[^>]*>(.*?)<\/p>/g,"$1")}})))},async doTranslate(t,e){if(e)this.texts=this.texts.map((e=>e.value===t?(e.trans="",e):e));else{const{list:e}=await k(t);if(e&&e.length>0){const[a]=e;this.texts=this.texts.map((e=>e.value===t?(e.trans=a.dst,e):e))}}}}};const X=l("data-v-79bcbee4");e("data-v-79bcbee4");const Z={key:0,class:"title"},J={class:"text"},Q={class:"footer"},tt=f(" from: ");a();const et=X(((t,e)=>{const a=d("router-link"),o=d("TranslateBox"),r=d("Loading");return s(),n(r,{loading:t.loading,error:t.exceptionText,size:"large"},{default:X((()=>[c("div",{class:"transcript",onContextmenu:e[1]||(e[1]=h(((...e)=>t.getContextmenu&&t.getContextmenu(...e)),["prevent"])),onClick:e[2]||(e[2]=(...e)=>t.hideTranslate&&t.hideTranslate(...e)),onTouchstart:e[3]||(e[3]=(...e)=>t.hideTranslate&&t.hideTranslate(...e))},[(s(!0),n(p,null,u(t.texts,(e=>(s(),n(p,{key:e.type+e.value},["title"===e.type?(s(),n("p",Z,i(e.value),1)):(s(),n(p,{key:1},[c("p",J,[c("span",null,i(e.value),1),c("span",null,[c("i",{class:"iconfont i-translater",onClick:a=>t.doTranslate(e.value,e.trans)},null,8,["onClick"])])]),m(c("p",{class:"text trans"},i(e.trans),513),[[g,e.trans]])],64))],64)))),128)),m(c("p",Q,[tt,c("a",{href:t.article.src},"pbs",8,["href"])],512),[[g,t.article.transcript]])],32),c("audio",{src:t.article.src,onEnded:e[4]||(e[4]=(...e)=>t.ended&&t.ended(...e)),ref:"audio"},null,40,["src"]),c("div",{class:"action",style:{backgroundImage:`url(${t.article.cover})`}},[t.paused?(s(),n("i",{key:0,class:"iconfont i-play",onClick:e[5]||(e[5]=(...e)=>t.play&&t.play(...e))})):(s(),n("i",{key:1,class:"iconfont i-pause",onClick:e[6]||(e[6]=(...e)=>t.pause&&t.pause(...e))})),c(a,{to:"/",custom:""},{default:X((({navigate:t})=>[c("i",{class:"iconfont i-home",onClick:t},null,8,["onClick"])])),_:1})],4),c(o,{text:t.translateText,position:t.translatePos,visible:t.translateVisible,btnVisible:t.translateBtnVisible,onShow:e[7]||(e[7]=e=>t.translateVisible=!0),onHide:e[8]||(e[8]=e=>t.translateBtnVisible=!1)},null,8,["text","position","visible","btnVisible"])])),_:1},8,["loading","error"])}));W.render=et,W.__scopeId="data-v-79bcbee4";var at={name:"NotFound"};const st=l("data-v-f2df4c1a");e("data-v-f2df4c1a");const nt={class:"content"};a();const it=st(((t,e,a,i,o,r)=>(s(),n("div",nt,"404 Not Found"))));at.render=it,at.__scopeId="data-v-f2df4c1a";const{BASE_URL:ot}={VITE_API:"https://api.chenggang.win/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},rt=[{path:"/",component:V},{path:"/detail/:id",component:W},{path:"/:pathMatch(.*)*",component:at}];var lt=v({history:b(ot),routes:rt}),ct={name:"App"};const dt=l("data-v-2cf36390");e("data-v-2cf36390");const pt={class:"container"};a();const ut=dt(((t,e,a,i,o,r)=>{const l=d("router-view");return s(),n("div",pt,[c(l)])}));ct.render=ut,ct.__scopeId="data-v-2cf36390";const mt=y(ct);mt.use(lt),mt.mount("#app");
